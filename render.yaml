services:
  # 1. ส่วนหน้าเว็บ (Web Interface)
  - type: web
    name: vipat-hotel-erp-web
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python3 web/interface/database_web_interface_new.py
    envVars:
      - key: PORT
        value: 10000
      - key: PYTHONPATH
        value: .
    disk:
      name: erp-db-disk
      mountPath: /opt/render/project/src/database/data
      sizeGB: 1

  # 2. ส่วนบอท Telegram (Worker)
  - type: worker
    name: vipat-hotel-erp-bot
    runtime: python
    buildCommand: pip install -r requirements.txt
    startCommand: python3 bot/core/บอทโรงแรมSQLite.py
    envVars:
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: PYTHONPATH
        value: .

  # 3. ส่วน n8n Automation
  - type: web
    name: vipat-hotel-n8n
    image: n8nio/n8n:latest
    plan: free
    envVars:
      - key: N8N_ENCRYPTION_KEY
        generateValue: true
      - key: N8N_USER_MANAGEMENT_DISABLED
        value: "false"
    disk:
      name: n8n-data-disk
      mountPath: /home/node/.n8n
      sizeGB: 1
