#!/usr/bin/env python3
"""
‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏î‡πâ‡∏ß‡∏¢ SQLite Database
"""
import os
import requests
import threading
import time
import sqlite3
import json
from datetime import datetime, timedelta
from database.models.booking_engine import create_booking, check_conflict
from database.models.db_access import ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

class ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°SQLite:
    def __init__(self):
        self.token = os.getenv("TELEGRAM_BOT_TOKEN", "YOUR_BOT_TOKEN_HERE")
        self.base_url = f"https://api.telegram.org/bot{self.token}"
        self.offset = 0
        self.running = False
        
        # SQLite Database
        self.db_path = "database/data/‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°.db"
        
        # User sessions for form input
        self.user_sessions = {}
        
    def ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•(self):
        """‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å (
                ‡∏£‡∏´‡∏±‡∏™ INTEGER PRIMARY KEY AUTOINCREMENT,
                ‡∏ä‡∏∑‡πà‡∏≠ TEXT NOT NULL,
                ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå TEXT,
                ‡∏≠‡∏µ‡πÄ‡∏°‡∏• TEXT,
                ‡∏´‡πâ‡∏≠‡∏á TEXT,
                ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô DATE,
                ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå DATE,
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TEXT DEFAULT '‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å',
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å (
                ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á TEXT PRIMARY KEY,
                ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó TEXT NOT NULL,
                ‡∏£‡∏≤‡∏Ñ‡∏≤ INTEGER NOT NULL,
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TEXT DEFAULT '‡∏ß‡πà‡∏≤‡∏á',
                ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å INTEGER,
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å) REFERENCES ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(‡∏£‡∏´‡∏±‡∏™)
            )
        ''')
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (
                ‡∏£‡∏´‡∏±‡∏™ INTEGER PRIMARY KEY AUTOINCREMENT,
                ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ TEXT NOT NULL,
                ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó TEXT NOT NULL,
                ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ INTEGER,
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TEXT DEFAULT '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'
            )
        ''')
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (
                ‡∏£‡∏´‡∏±‡∏™ INTEGER PRIMARY KEY AUTOINCREMENT,
                ‡∏£‡∏´‡∏±‡∏™‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ INTEGER,
                ‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô TEXT NOT NULL,
                ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß BOOLEAN DEFAULT 0,
                ‡∏ó‡∏≥‡πÇ‡∏î‡∏¢ INTEGER,
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥ TIMESTAMP,
                FOREIGN KEY (‡∏£‡∏´‡∏±‡∏™‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£) REFERENCES ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö(‡∏£‡∏´‡∏±‡∏™)
            )
        ''')
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞ (
                ‡∏£‡∏´‡∏±‡∏™ INTEGER PRIMARY KEY AUTOINCREMENT,
                ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ TEXT NOT NULL,
                ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î TEXT,
                ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà TEXT,
                ‡πÄ‡∏™‡∏ô‡∏≠‡πÇ‡∏î‡∏¢ INTEGER,
                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏´‡∏ß‡∏ï INTEGER DEFAULT 0,
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TEXT DEFAULT '‡∏£‡∏≠‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤',
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏ô‡∏≠ TIMESTAMP DEFAULT CURRENT_TIMESTAMP
            )
        ''')
        
        # ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS ‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏ß‡∏ï (
                ‡∏£‡∏´‡∏±‡∏™ INTEGER PRIMARY KEY AUTOINCREMENT,
                ‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞ INTEGER,
                ‡∏ú‡∏π‡πâ‡πÇ‡∏´‡∏ß‡∏ï INTEGER,
                ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏ß‡∏ï TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                FOREIGN KEY (‡∏£‡∏´‡∏±‡∏™‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞) REFERENCES ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞(‡∏£‡∏´‡∏±‡∏™)
            )
        ''')
        
        conn.commit()
        conn.close()
        print("‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQLite ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢")
    
    def ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á(self):
        """‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        cursor.execute("SELECT COUNT(*) FROM ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å")
        if cursor.fetchone()[0] > 0:
            conn.close()
            return
        
        # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
        ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = [
            ("‡∏ô‡∏≤‡∏¢‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ", "081-234-5678", "somchai@email.com", "102", "2025-01-20", "2025-01-23"),
            ("‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏°‡∏≤‡∏•‡∏µ ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°", "082-345-6789", "malee@email.com", "301", "2025-01-21", "2025-01-25")
        ]
        
        cursor.executemany('''
            INSERT INTO ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å (‡∏ä‡∏∑‡πà‡∏≠, ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå, ‡∏≠‡∏µ‡πÄ‡∏°‡∏•, ‡∏´‡πâ‡∏≠‡∏á, ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå)
            VALUES (?, ?, ?, ?, ?, ?)
        ''', ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å)
        
        # ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
        ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å = [
            ("101", "‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô", 800, "‡∏ß‡πà‡∏≤‡∏á", None),
            ("102", "‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô", 800, "‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å", 1),
            ("103", "‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô", 800, "‡∏ß‡πà‡∏≤‡∏á", None),
            ("201", "‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏ã‡πå", 1200, "‡∏ß‡πà‡∏≤‡∏á", None),
            ("202", "‡∏î‡∏µ‡∏•‡∏±‡∏Å‡∏ã‡πå", 1200, "‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°", None),
            ("301", "‡∏™‡∏ß‡∏µ‡∏ó", 2000, "‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å", 2)
        ]
        
        cursor.executemany('''
            INSERT INTO ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å (‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å)
            VALUES (?, ?, ?, ?, ?)
        ''', ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å)
        
        conn.commit()
        conn.close()
        print("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢")
    
    def ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(self, chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°, ‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå=None):
        """‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"""
        payload = {"chat_id": chat_id, "text": ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°, "parse_mode": "HTML"}
        if ‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå:
            payload["reply_markup"] = ‡πÅ‡∏õ‡πâ‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå
        try:
            response = requests.post(f"{self.base_url}/sendMessage", json=payload, timeout=10)
            return response.json().get("ok", False)
        except:
            return False
    
    def ‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å(self):
        """‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å - ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ERP"""
        return {
            "inline_keyboard": [
                [
                    {"text": "üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î", "callback_data": "dashboard"},
                    {"text": "üí∞ ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô", "callback_data": "finance"}
                ],
                [
                    {"text": "üè† ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å", "callback_data": "rooms"},
                    {"text": "üìÖ ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á", "callback_data": "bookings"}
                ],
                [
                    {"text": "‚ûï ‡∏à‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å", "callback_data": "add_guest"},
                    {"text": "üìã ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô", "callback_data": "reports"}
                ]
            ]
        }
    
    def ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        # ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
        cursor.execute("SELECT COUNT(*) FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å")
        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å WHERE ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = '‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å'")
        ‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = cursor.fetchone()[0]
        
        cursor.execute("SELECT COUNT(*) FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å WHERE ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = '‡∏ß‡πà‡∏≤‡∏á'")
        ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á = cursor.fetchone()[0]
        
        # ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
        cursor.execute("SELECT COUNT(*) FROM ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å WHERE ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å'")
        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = cursor.fetchone()[0]
        
        # ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
        cursor.execute("SELECT COUNT(*) FROM ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö")
        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö = cursor.fetchone()[0]
        
        # ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞
        cursor.execute("SELECT COUNT(*) FROM ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞")
        ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞ = cursor.fetchone()[0]
        
        conn.close()
        
        ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î = f"""üè® <b>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° (SQLite)</b>

üìä <b>‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</b>
üè† ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î} ‡∏´‡πâ‡∏≠‡∏á
üî¥ ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å: {‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å} ‡∏´‡πâ‡∏≠‡∏á ({(‡∏´‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å/‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î*100):.1f}%)
üü¢ ‡∏ß‡πà‡∏≤‡∏á: {‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á} ‡∏´‡πâ‡∏≠‡∏á

üë• <b>‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:</b> {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å} ‡∏Ñ‡∏ô
‚úÖ <b>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:</b> {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
üí° <b>‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:</b> {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£

üíæ <b>‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</b> SQLite
üìÖ <b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</b> {datetime.now().strftime("%d/%m/%Y %H:%M")}

<b>üéØ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</b>"""
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute('''
            SELECT ‡∏£‡∏´‡∏±‡∏™, ‡∏ä‡∏∑‡πà‡∏≠, ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå, ‡∏´‡πâ‡∏≠‡∏á, ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            FROM ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
            WHERE ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = '‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å'
            ORDER BY ‡∏£‡∏´‡∏±‡∏™
        ''')
        
        ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = cursor.fetchall()
        conn.close()
        
        if not ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "üë• <b>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</b>")
            return
        
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° = "üë• <b>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å (‡∏à‡∏≤‡∏Å SQLite)</b>\n\n"
        
        for ‡∏£‡∏´‡∏±‡∏™, ‡∏ä‡∏∑‡πà‡∏≠, ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå, ‡∏´‡πâ‡∏≠‡∏á, ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô, ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ in ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å:
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"üÜî <b>{‡∏£‡∏´‡∏±‡∏™}</b> - {‡∏ä‡∏∑‡πà‡∏≠}\n"
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"   üìû {‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå}\n"
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"   üè† ‡∏´‡πâ‡∏≠‡∏á: {‡∏´‡πâ‡∏≠‡∏á}\n"
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"   üìÖ {‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô} ‚Üí {‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå}\n\n"
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        cursor.execute('''
            SELECT h.‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, h.‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, h.‡∏£‡∏≤‡∏Ñ‡∏≤, h.‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, p.‡∏ä‡∏∑‡πà‡∏≠
            FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å h
            LEFT JOIN ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å p ON h.‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = p.‡∏£‡∏´‡∏±‡∏™
            ORDER BY h.‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á
        ''')
        
        ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å = cursor.fetchall()
        conn.close()
        
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° = "üè† <b>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å (‡∏à‡∏≤‡∏Å SQLite)</b>\n\n"
        
        # ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏ä‡∏±‡πâ‡∏ô
        ‡∏ä‡∏±‡πâ‡∏ô = {}
        for ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å in ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:
            ‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á = ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á[0]
            if ‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á not in ‡∏ä‡∏±‡πâ‡∏ô:
                ‡∏ä‡∏±‡πâ‡∏ô[‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á] = []
            ‡∏ä‡∏±‡πâ‡∏ô[‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á].append((‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å))
        
        for ‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á in sorted(‡∏ä‡∏±‡πâ‡∏ô.keys()):
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"üè¢ <b>‡∏ä‡∏±‡πâ‡∏ô {‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á}</b>\n"
            
            for ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å in ‡∏ä‡∏±‡πâ‡∏ô[‡∏ä‡∏±‡πâ‡∏ô‡∏´‡πâ‡∏≠‡∏á]:
                ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå = {
                    "‡∏ß‡πà‡∏≤‡∏á": "üü¢",
                    "‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å": "üî¥",
                    "‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°": "üü°"
                }.get(‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, "‚ö™")
                
                ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å = f" - {‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å}" if ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å else ""
                
                ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"{‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå} <b>‡∏´‡πâ‡∏≠‡∏á {‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á}</b> ({‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó}) {‡∏£‡∏≤‡∏Ñ‡∏≤:,}‡∏ø{‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å}\n"
            
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += "\n"
        
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += "üìã <b>‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå:</b>\n"
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += "üü¢ ‡∏ß‡πà‡∏≤‡∏á | üî¥ ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å | üü° ‡∏ã‡πà‡∏≠‡∏°‡πÅ‡∏ã‡∏°\n"
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        
        # ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå
        ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå = os.path.getsize(self.db_path)
        
        # ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        cursor.execute("SELECT name FROM sqlite_master WHERE type='table'")
        ‡∏ï‡∏≤‡∏£‡∏≤‡∏á = cursor.fetchall()
        
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° = f"""üíæ <b>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• SQLite</b>

üìÅ <b>‡πÑ‡∏ü‡∏•‡πå:</b> {self.db_path}
üìä <b>‡∏Ç‡∏ô‡∏≤‡∏î:</b> {‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå:,} bytes
üóÇÔ∏è <b>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á:</b> {len(‡∏ï‡∏≤‡∏£‡∏≤‡∏á)} ‡∏ï‡∏≤‡∏£‡∏≤‡∏á

üìã <b>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:</b>
"""
        
        # ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        for (‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á,) in ‡∏ï‡∏≤‡∏£‡∏≤‡∏á:
            cursor.execute(f"SELECT COUNT(*) FROM {‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á}")
            ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß = cursor.fetchone()[0]
            ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"‚Ä¢ {‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏£‡∏≤‡∏á}: {‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß} ‡πÅ‡∏ñ‡∏ß\n"
        
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° += f"""
‚úÖ <b>‡∏Ç‡πâ‡∏≠‡∏î‡∏µ SQLite:</b>
‚Ä¢ ACID Compliance
‚Ä¢ Transaction Support
‚Ä¢ SQL Query Support
‚Ä¢ Concurrent Read Access
‚Ä¢ Lightweight & Fast
‚Ä¢ No Server Required

üìà <b>‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û:</b>
‚Ä¢ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö SQL queries
‚Ä¢ ‡∏°‡∏µ indexing
‚Ä¢ Transaction rollback
‚Ä¢ Data integrity"""
        
        conn.close()
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
    
    def ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(self, message):
        """‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"""
        chat_id = message["chat"]["id"]
        ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° = message.get("text", "").strip()
        ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ = message["from"].get("first_name", "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ")
        
        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if chat_id in self.user_sessions:
            if self.‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°):
                return
        
        if ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "/start":
            self.‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î(chat_id)
            
        elif ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "üë• ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id)
            
        elif ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "üè† ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å(chat_id)
            
        elif ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å":
            self.‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id)
            
        elif ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "üíæ ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•(chat_id)
            
        elif ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "üìä ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô":
            self.‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î(chat_id)
            
        else:
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùì <b>‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á</b>\n\nüì± ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô")
    
    def ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(self, chat_id):
        """‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å"""
        self.user_sessions[chat_id] = {
            "action": "add_guest",
            "step": "name",
            "data": {}
        }
        
        cancel_keyboard = {
            "keyboard": [["‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"]],
            "resize_keyboard": True
        }
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, 
            "‚ûï <b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà</b>\n\nüë§ <b>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1/5:</b> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•", 
            cancel_keyboard)
    
    def ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(self, chat_id, ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°):
        """‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å"""
        session = self.user_sessions.get(chat_id)
        if not session or session["action"] != "add_guest":
            return False
        
        if ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å":
            del self.user_sessions[chat_id]
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùå <b>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</b>", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
            return True
        
        step = session["step"]
        
        if step == "name":
            session["data"]["‡∏ä‡∏∑‡πà‡∏≠"] = ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            session["step"] = "phone"
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, 
                f"‚úÖ <b>‡∏ä‡∏∑‡πà‡∏≠:</b> {‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°}\n\nüìû <b>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2/5:</b> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå")
            
        elif step == "phone":
            session["data"]["‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå"] = ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            session["step"] = "email"
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, 
                f"‚úÖ <b>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</b> {‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°}\n\nüìß <b>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3/5:</b> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå '‡∏Ç‡πâ‡∏≤‡∏°')")
            
        elif step == "email":
            if ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°.lower() != "‡∏Ç‡πâ‡∏≤‡∏°":
                session["data"]["‡∏≠‡∏µ‡πÄ‡∏°‡∏•"] = ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            else:
                session["data"]["‡∏≠‡∏µ‡πÄ‡∏°‡∏•"] = None
            session["step"] = "room"
            
            # ‡πÅ‡∏™‡∏î‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
            conn = sqlite3.connect(self.db_path)
            cursor = conn.cursor()
            cursor.execute("SELECT ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤ FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å WHERE ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ = '‡∏ß‡πà‡∏≤‡∏á' ORDER BY ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á")
            available_rooms = cursor.fetchall()
            conn.close()
            
            if available_rooms:
                room_text = "üè† <b>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4/5:</b> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å\n\nüìã <b>‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á:</b>\n"
                room_keyboard = {"keyboard": []}
                
                for ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó, ‡∏£‡∏≤‡∏Ñ‡∏≤ in available_rooms:
                    room_text += f"‚Ä¢ ‡∏´‡πâ‡∏≠‡∏á {‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á} ({‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó}) - {‡∏£‡∏≤‡∏Ñ‡∏≤:,}‡∏ø\n"
                    room_keyboard["keyboard"].append([f"‡∏´‡πâ‡∏≠‡∏á {‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á}"])
                
                room_keyboard["keyboard"].append(["‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"])
                room_keyboard["resize_keyboard"] = True
                
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, room_text, room_keyboard)
            else:
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùå <b>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á</b>", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
                del self.user_sessions[chat_id]
            
        elif step == "room":
            if ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°.startswith("‡∏´‡πâ‡∏≠‡∏á "):
                room_number = ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°.replace("‡∏´‡πâ‡∏≠‡∏á ", "")
                session["data"]["‡∏´‡πâ‡∏≠‡∏á"] = room_number
                session["step"] = "days"
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, 
                    f"‚úÖ <b>‡∏´‡πâ‡∏≠‡∏á:</b> {room_number}\n\nüìÖ <b>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 5/5:</b> ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç)")
            else:
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùå <b>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</b>")
                
        elif step == "days":
            try:
                days = int(‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
                if days <= 0:
                    raise ValueError()
                    
                session["data"]["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô"] = days
                
                # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
                from datetime import datetime, timedelta
                checkin = datetime.now().date()
                checkout = checkin + timedelta(days=days)
                
                session["data"]["‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô"] = checkin.strftime("%Y-%m-%d")
                session["data"]["‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå"] = checkout.strftime("%Y-%m-%d")
                
                # ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡∏∞‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                self.‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id, session["data"])
                
            except ValueError:
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùå <b>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç</b>")
        
        elif step == "confirm":
            if ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° == "‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô":
                self.‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id)
            else:
                del self.user_sessions[chat_id]
                self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "‚ùå <b>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</b>", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
        
        return True
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(self, chat_id, data):
        """‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å"""
        # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()
        cursor.execute("SELECT ‡∏£‡∏≤‡∏Ñ‡∏≤ FROM ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å WHERE ‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á = ?", (data["‡∏´‡πâ‡∏≠‡∏á"],))
        room_price = cursor.fetchone()[0]
        conn.close()
        
        total_price = room_price * data["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô"]
        
        summary = f"""üìã <b>‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å</b>

üë§ <b>‡∏ä‡∏∑‡πà‡∏≠:</b> {data['‡∏ä‡∏∑‡πà‡∏≠']}
üìû <b>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</b> {data['‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå']}
üìß <b>‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</b> {data.get('‡∏≠‡∏µ‡πÄ‡∏°‡∏•', '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏')}
üè† <b>‡∏´‡πâ‡∏≠‡∏á:</b> {data['‡∏´‡πâ‡∏≠‡∏á']}
üìÖ <b>‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô:</b> {data['‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô']}
üìÖ <b>‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå:</b> {data['‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå']}
üóìÔ∏è <b>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô:</b> {data['‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô']} ‡∏ß‡∏±‡∏ô
üí∞ <b>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°:</b> {total_price:,} ‡∏ö‡∏≤‡∏ó

<b>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•?</b>"""
        
        confirm_keyboard = {
            "keyboard": [
                ["‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô", "‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"]
            ],
            "resize_keyboard": True
        }
        
        self.user_sessions[chat_id]["step"] = "confirm"
        self.user_sessions[chat_id]["total_price"] = total_price
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, summary, confirm_keyboard)
    
    def ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(self, chat_id):
        """‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ ERP Booking Engine"""
        session = self.user_sessions.get(chat_id)
        if not session:
            return
        
        data = session["data"]
        
        # ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ ERP Engine (‡πÄ‡∏ä‡πá‡∏Ñ Conflict + ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
        result = create_booking(
            customer_id=f"TG-{chat_id}", 
            room_number=data['‡∏´‡πâ‡∏≠‡∏á'], 
            check_in=data['‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô'], 
            check_out=data['‡∏ß‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏≠‡∏≤‡∏ó‡πå'], 
            total_price=session['total_price']
        )
        
        if result["success"]:
            # ‡∏•‡∏ö session
            del self.user_sessions[chat_id]
            
            success_msg = f"""‚úÖ <b>‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (‡∏£‡∏∞‡∏ö‡∏ö ERP)!</b>

üÜî <b>Booking ID:</b> {result['booking_id']}
üë§ <b>‡∏ä‡∏∑‡πà‡∏≠:</b> {data['‡∏ä‡∏∑‡πà‡∏≠']}
üè† <b>‡∏´‡πâ‡∏≠‡∏á:</b> {data['‡∏´‡πâ‡∏≠‡∏á']}
üí∞ <b>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</b> ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ {session['total_price']:,} ‡∏ö‡∏≤‡∏ó

<b>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß</b>"""
            
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, success_msg, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
        else:
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, f"‚ùå <b>‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:</b> {result['message']}", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
            if chat_id in self.user_sessions:
                del self.user_sessions[chat_id]
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ-‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"""
        conn = ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•()
        cursor = conn.cursor()
        
        # 1. ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ (1020)
        cursor.execute("SELECT SUM(debit - credit) FROM Data_JournalEntries WHERE account_code = '1020'")
        cash_balance = cursor.fetchone()[0] or 0
        
        # 2. ‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏™‡∏° (‡∏´‡∏°‡∏ß‡∏î 4)
        cursor.execute('''
            SELECT SUM(e.credit - e.debit) 
            FROM Data_JournalEntries e
            JOIN Data_ChartOfAccounts c ON e.account_code = c.account_code
            WHERE c.category = 'Revenue'
        ''')
        total_revenue = cursor.fetchone()[0] or 0
        
        # 3. ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Ñ‡πâ‡∏≤‡∏á‡∏à‡πà‡∏≤‡∏¢ (Liabilities 2050)
        cursor.execute("SELECT SUM(credit - debit) FROM Data_JournalEntries WHERE account_code = '2050'")
        total_deposits = cursor.fetchone()[0] or 0
        
        # 4. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        cursor.execute('''
            SELECT j.description, e.debit, e.credit, c.account_name
            FROM Data_Journal j
            JOIN Data_JournalEntries e ON j.journal_id = e.journal_id
            JOIN Data_ChartOfAccounts c ON e.account_code = c.account_code
            ORDER BY j.transaction_date DESC LIMIT 5
        ''')
        recent_entries = cursor.fetchall()
        
        conn.close()
        
        msg = f"""üìä <b>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Real-time ERP)</b>

üí∞ <b>‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö:</b> {cash_balance:,.2f} ‡∏ø
üì• <b>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∞‡∏™‡∏°:</b> {total_revenue:,.2f} ‡∏ø
‚è≥ <b>‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà:</b> {total_deposits:,.2f} ‡∏ø

--------------------------------
üìù <b>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</b>\n"""
        
        for desc, dr, cr, acc_name in recent_entries:
            amount = dr if dr > 0 else cr
            type_label = "Dr" if dr > 0 else "Cr"
            msg += f"‚Ä¢ {desc}\n  ‚îî {acc_name}: {amount:,.0f} ({type_label})\n"
            
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, msg, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())

    def ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£Callback(self, callback_query):
        """‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ callback query ‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° inline"""
        chat_id = callback_query["message"]["chat"]["id"]
        data = callback_query["data"]
        
        # ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö callback query
        callback_url = f"{self.base_url}/answerCallbackQuery"
        requests.post(callback_url, json={"callback_query_id": callback_query["id"]})
        
        if data == "dashboard":
            self.‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î(chat_id)
        elif data == "finance":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô(chat_id)
        elif data == "guests":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id)
        elif data == "rooms":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å(chat_id)
        elif data == "add_guest":
            self.‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å(chat_id)
        elif data == "backup":
            self.‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•(chat_id)
        elif data == "web":
            self.‡πÅ‡∏™‡∏î‡∏áWebInterface(chat_id)
        elif data == "help":
            self.‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠(chat_id)
        else:
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "üîß ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤...", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
    
    def ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•(self, chat_id):
        """‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"""
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, "üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...")
        
        try:
            import sys
            sys.path.append('src')
            from backup_system import DatabaseBackup
            
            backup = DatabaseBackup()
            backup_file = backup.create_backup()
            
            msg = f"""‚úÖ <b>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</b>
            
üìÅ <b>‡πÑ‡∏ü‡∏•‡πå:</b> {os.path.basename(backup_file)}
üìä <b>‡∏Ç‡∏ô‡∏≤‡∏î:</b> {os.path.getsize(backup_file)/1024:.1f} KB
‚è∞ <b>‡πÄ‡∏ß‡∏•‡∏≤:</b> {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"""
            
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, msg, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
            
        except Exception as e:
            self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, f"‚ùå <b>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:</b> {str(e)}", self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
    
    def ‡πÅ‡∏™‡∏î‡∏áWebInterface(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Web Interface"""
        msg = """üåê <b>Web Interface</b>
        
üì± <b>‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:</b>
‚Ä¢ http://localhost:8081

üîß <b>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:</b>
‚Ä¢ ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‚Ä¢ ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‚Ä¢ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

üí° <b>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</b> ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå"""
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, msg, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())
    
    def ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠(self, chat_id):
        """‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠"""
        msg = """‚ÑπÔ∏è <b>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</b>

üéØ <b>‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:</b>
‚Ä¢ üìä ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î - ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°
‚Ä¢ üë• ‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å
‚Ä¢ üè† ‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å
‚Ä¢ ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏û‡∏±‡∏Å‡πÉ‡∏´‡∏°‡πà

üîß <b>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠:</b>
‚Ä¢ üíæ ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• - ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
‚Ä¢ üåê Web Interface - ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ß‡πá‡∏ö
‚Ä¢ üìà ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ

üìû <b>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</b> @HELLO_Hotel_bot"""
        
        self.‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(chat_id, msg, self.‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å())

    def ‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó(self):
        """‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó"""
        try:
            url = f"{self.base_url}/getUpdates"
            params = {"offset": self.offset, "timeout": 30}
            response = requests.get(url, params=params, timeout=35)
            if response.status_code == 200:
                return response.json()
        except:
            pass
        return None
    
    def ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô(self):
        """‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô"""
        self.running = True
        print("ü§ñ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏° SQLite ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...")
        
        while self.running:
            try:
                updates = self.‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó()
                if updates and updates.get("ok"):
                    for update in updates.get("result", []):
                        self.offset = update["update_id"] + 1
                        
                        # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                        if "message" in update:
                            self.‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°(update["message"])
                        
                        # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ callback query
                        elif "callback_query" in update:
                            self.‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£Callback(update["callback_query"])
                            
            except Exception as e:
                print(f"‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: {e}")
                time.sleep(5)

if __name__ == "__main__":
    ‡∏ö‡∏≠‡∏ó = ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°SQLite()
    ‡∏ö‡∏≠‡∏ó.‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô()
